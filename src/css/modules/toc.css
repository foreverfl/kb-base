/**
 * Table of Contents (TOC)
 * ========================
 * Styles for the Table of Contents on doc and blog pages
 */

/* ==========================================================================
   TOC CONTAINER
   ========================================================================== */

/* Main TOC Container */
.table-of-contents,
.toc-wrapper {
  @apply sticky top-20 max-h-[calc(100vh-5rem)] overflow-y-auto;
}

/* TOC Wrapper */
.theme-doc-toc-desktop,
div[class*="tocCollapsible"] {
  @apply border-l-2 border-gray-200 pl-4;
}

[data-theme='dark'] .theme-doc-toc-desktop,
[data-theme='dark'] div[class*="tocCollapsible"] {
  @apply border-gray-700;
}

/* TOC Title */
.toc-title,
div[class*="tocCollapsibleButton"] {
  @apply text-sm font-semibold uppercase tracking-wider text-gray-600 mb-3;
}

[data-theme='dark'] .toc-title,
[data-theme='dark'] div[class*="tocCollapsibleButton"] {
  @apply text-gray-400;
}

/* ==========================================================================
   TOC LIST STRUCTURE
   ========================================================================== */

/* TOC List */
.table-of-contents__list,
ul.table-of-contents {
  @apply list-none m-0 p-0 space-y-2;
}

/* Nested TOC Lists */
.table-of-contents__list .table-of-contents__list {
  @apply ml-3 mt-2 space-y-1;
}

/* ==========================================================================
   TOC LINKS
   ========================================================================== */

/* Base TOC Link */
.table-of-contents__link {
  @apply block text-sm text-gray-600 hover:text-green-600 transition-colors duration-150 py-1 pr-2 border-l-2 border-transparent -ml-[2px] pl-[14px];
}

[data-theme='dark'] .table-of-contents__link {
  @apply text-gray-400 hover:text-green-400;
}

/* Active TOC Link */
.table-of-contents__link--active {
  @apply text-green-600 font-semibold border-l-2 border-green-500 bg-green-50/50 rounded-r;
}

[data-theme='dark'] .table-of-contents__link--active {
  @apply text-green-400 bg-green-600/10;
}

/* Hover effect on TOC link */
.table-of-contents__link:hover {
  @apply no-underline text-green-600 pl-[16px];
}

[data-theme='dark'] .table-of-contents__link:hover {
  @apply text-green-400;
}

/* ==========================================================================
   TOC LEVELS
   ========================================================================== */

/* Level 2 (H2) */
.table-of-contents__link--level-2 {
  @apply font-medium;
}

/* Level 3 (H3) */
.table-of-contents__link--level-3 {
  @apply text-xs ml-3 text-gray-500;
}

[data-theme='dark'] .table-of-contents__link--level-3 {
  @apply text-gray-500;
}

/* Level 4+ (H4 and deeper) */
.table-of-contents__link--level-4,
.table-of-contents__link--level-5,
.table-of-contents__link--level-6 {
  @apply text-xs ml-6 text-gray-400;
}

[data-theme='dark'] .table-of-contents__link--level-4,
[data-theme='dark'] .table-of-contents__link--level-5,
[data-theme='dark'] .table-of-contents__link--level-6 {
  @apply text-gray-600;
}

/* ==========================================================================
   COLLAPSIBLE TOC
   ========================================================================== */

/* Collapsible Button */
button[class*="tocCollapsibleButton"] {
  @apply flex items-center justify-between w-full text-left text-sm font-semibold text-gray-600 hover:text-gray-900 py-2 transition-colors;
}

[data-theme='dark'] button[class*="tocCollapsibleButton"] {
  @apply text-gray-400 hover:text-white;
}

/* Collapsible Content */
div[class*="tocCollapsibleContent"] {
  animation: fadeIn 0.2s ease-in;
}

/* ==========================================================================
   MOBILE TOC
   ========================================================================== */

/* Mobile TOC Container */
@media (max-width: 996px) {
  .theme-doc-toc-mobile {
    @apply mb-6 p-4 bg-gray-50 rounded-lg border border-gray-200;
  }

  [data-theme='dark'] .theme-doc-toc-mobile {
    @apply bg-gray-800/50 border-gray-700;
  }

  .theme-doc-toc-mobile button {
    @apply w-full text-left font-medium text-gray-700 hover:text-gray-900;
  }

  [data-theme='dark'] .theme-doc-toc-mobile button {
    @apply text-gray-300 hover:text-white;
  }
}

/* ==========================================================================
   INLINE TOC (in content)
   ========================================================================== */

/* Inline TOC Container */
.toc-inline {
  @apply p-4 bg-gray-50 rounded-lg border border-gray-200 mb-6;
}

[data-theme='dark'] .toc-inline {
  @apply bg-gray-800/50 border-gray-700;
}

.toc-inline .table-of-contents__link {
  @apply py-2;
}

/* ==========================================================================
   BLOG TOC
   ========================================================================== */

/* Blog Post TOC */
.col--3 .table-of-contents {
  @apply sticky top-24;
}

.blog-post-toc {
  @apply text-sm;
}

.blog-post-toc .table-of-contents__link {
  @apply py-1.5;
}

/* ==========================================================================
   SCROLLBAR STYLING
   ========================================================================== */

/* Custom scrollbar for TOC */
.table-of-contents::-webkit-scrollbar,
div[class*="tocCollapsible"]::-webkit-scrollbar {
  @apply w-1;
}

.table-of-contents::-webkit-scrollbar-track,
div[class*="tocCollapsible"]::-webkit-scrollbar-track {
  @apply bg-transparent;
}

.table-of-contents::-webkit-scrollbar-thumb,
div[class*="tocCollapsible"]::-webkit-scrollbar-thumb {
  @apply bg-gray-300 rounded-full;
}

[data-theme='dark'] .table-of-contents::-webkit-scrollbar-thumb,
[data-theme='dark'] div[class*="tocCollapsible"]::-webkit-scrollbar-thumb {
  @apply bg-gray-700;
}

.table-of-contents::-webkit-scrollbar-thumb:hover,
div[class*="tocCollapsible"]::-webkit-scrollbar-thumb:hover {
  @apply bg-gray-400;
}

[data-theme='dark'] .table-of-contents::-webkit-scrollbar-thumb:hover,
[data-theme='dark'] div[class*="tocCollapsible"]::-webkit-scrollbar-thumb:hover {
  @apply bg-gray-600;
}

/* ==========================================================================
   TOC ANIMATION
   ========================================================================== */

@keyframes slide-in {
  from {
    opacity: 0;
    transform: translateX(0.5rem);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

/* ==========================================================================
   ACCESSIBILITY
   ========================================================================== */

/* Focus styles for keyboard navigation */
.table-of-contents__link:focus-visible {
  @apply outline-2 outline-offset-2 outline-green-500 rounded;
}

/* Skip link for TOC */
.toc-skip-link {
  @apply sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 focus:z-50 focus:px-4 focus:py-2 focus:bg-white focus:text-green-600 focus:rounded-lg focus:shadow-lg;
}

[data-theme='dark'] .toc-skip-link:focus {
  @apply bg-gray-800 text-green-400;
}